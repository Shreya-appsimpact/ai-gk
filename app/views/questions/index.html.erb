<div class="container">
  <div class="row mt-5 mb-5">
    <div class="col-md-3">
      <% @categories.each do |category| %>
        <div class="list-group shadow">
          <%= link_to category.name, category, class: "list-group-item list-group-item-action rounded-0" %>
        </div>
      <% end %>
      <%= link_to 'New Question', new_question_path, class: "btn btn-primary mt-5" %> 
      <%#= link_to 'download pdf', questions_path(format: 'pdf') %>
    </div>
    <div class="col-md-7">
      <div id="questions_index">
        <div class="card shadow rounded-0">
          <div class="card-body">
            <% @questions.each_with_index do |question, index| %>
            <h4 class="font-weight-bold font-16 text-primary"><%= index + 1 %>. <%= question.title %></h4>
            <p class="lead font-14"><%= question.answer %></p>
            <hr>
            <% end %>
          </div>
        </div>
      </div>
      <div id= "loading-indicator" class="text-center">
        <%= image_tag("loading.gif") %>
        <p>Loading Questions</p>
      </div>
      <select id="load" class="mt-5 form-control ">
        <option value="10">Showing first 10</option>
        <option value="50">Show 50</option>
        <option value="100">Show 100</option>
        <option value="250">Show 250</option>
        <option value="All">Show all</option>
      </select>
    </div>
    <div class="col-md-2"> 
      <div class="row">
        <div class="col-12 mt-2">
          <%= image_tag "book1.jpg", class: "img-size" %>
        </div>
        <div class="col-12 mt-2">
          <%= image_tag "book2.jpg", class: "img-size" %>
        </div>
        <div class="col-12 mt-2">
          <%= image_tag "book3.jpeg", class: "img-size" %>
        </div>
        <div class="col-12 mt-2">
          <%= image_tag "book4.jpg", class: "img-size" %>
        </div>        
      </div>
    </div>
  </div>
  
</div>
<script type="text/javascript">
  $(function($) {
    $("#load").on('change', function() {
      var count = $('select#load :selected').val();
       $.ajax({
        url: "/questions", 
        type: "GET", 
        data: {value: count}
      });
    });
  })
   $(function($) {

    $("#loading-indicator").hide();
    $(document).ajaxStart(function(){
      // Show image container
      $("#loading-indicator").show();
      $("#questions_index").hide();
    });
    $(document).ajaxComplete(function(){
      // Hide image container
      $("#loading-indicator").delay(2000).hide(0);
      $("#questions_index").delay(2000).show(0);
    });
  });  
</script>
<style type="text/css">
  .img-size{
    width: 100%;
  }
  @media print {
    body {
      background-color: #FFF;
    }

    #container {
      width: auto;
      margin: 0;
      padding: 0;
      border: none;
    }
    
    #line_items {
      page-break-before: always;
    }
    
    #pdf_link {
      display: none;
    }
  }
</style>